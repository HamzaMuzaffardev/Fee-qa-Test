{% comment %}
  Custom Measurements Form
  Renders a measurement form for custom-fit products
  
  Usage: {% render 'custom-measurements', product: product %}
  
  Requires: 
  - product.metafields.custom.is_custom = true (to show the form)
  - assets/custom-measurements.css
  - assets/custom-measurements.js
{% endcomment %}

{% if product.metafields.custom.is_custom == true %}
  {{ 'custom-measurements.css' | asset_url | stylesheet_tag }}
  <script src="{{ 'custom-measurements.js' | asset_url }}" defer></script>

  <div class="custom-measurements-wrapper" data-measurements-required="true">
    <div class="measurements-header">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 3H3v18h18V3z"></path>
        <path d="M9 3v18"></path>
        <path d="M3 9h6"></path>
        <path d="M3 15h6"></path>
      </svg>
      <h4 class="measurements-title">{{ 'products.product.custom_measurements.title' | t | default: 'Your Custom Measurements' }}</h4>
    </div>
    
    <p class="measurements-subtitle">
      {{ 'products.product.custom_measurements.subtitle' | t | default: 'Please provide your body measurements for a perfect custom fit. All measurements should be in centimeters (cm).' }}
    </p>
    
    <div class="measurements-required-note">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="8" x2="12" y2="12"></line>
        <line x1="12" y1="16" x2="12.01" y2="16"></line>
      </svg>
      <span>{{ 'products.product.custom_measurements.required_note' | t | default: 'Fields marked with * are required' }}</span>
    </div>

    <table class="abaya-measurements">
      <thead>
        <tr>
          <th>{{ 'products.product.custom_measurements.measurement' | t | default: 'Measurement' }}</th>
          <th>{{ 'products.product.custom_measurements.your_value' | t | default: 'Your Value (cm)' }}</th>
        </tr>
      </thead>
      <tbody>
        {% comment %} 1. Overall garment length - REQUIRED {% endcomment %}
        <tr>
          <td>
            {{ 'products.product.custom_measurements.length' | t | default: 'Overall length (shoulder → hem)' }}
            <span class="required-indicator">*</span>
          </td>
          <td>
            <input 
              type="number" 
              name="properties[Abaya Length (cm)]" 
              min="100" 
              max="170" 
              step="0.1" 
              required 
              placeholder="{{ 'products.product.custom_measurements.placeholder_length' | t | default: 'e.g. 140' }}"
            >
            <span class="input-hint">100 - 170 cm</span>
          </td>
        </tr>

        {% comment %} 2. Shoulder width - REQUIRED {% endcomment %}
        <tr>
          <td>
            {{ 'products.product.custom_measurements.shoulder' | t | default: 'Shoulder width (bone → bone)' }}
            <span class="required-indicator">*</span>
          </td>
          <td>
            <input 
              type="number" 
              name="properties[Shoulder Width (cm)]" 
              min="30" 
              max="60" 
              step="0.1" 
              required 
              placeholder="{{ 'products.product.custom_measurements.placeholder_shoulder' | t | default: 'e.g. 42' }}"
            >
            <span class="input-hint">30 - 60 cm</span>
          </td>
        </tr>

        {% comment %} 3. Bust / chest circumference - REQUIRED {% endcomment %}
        <tr>
          <td>
            {{ 'products.product.custom_measurements.bust' | t | default: 'Bust / chest circumference' }}
            <span class="required-indicator">*</span>
          </td>
          <td>
            <input 
              type="number" 
              name="properties[Bust (cm)]" 
              min="70" 
              max="150" 
              step="0.1" 
              required 
              placeholder="{{ 'products.product.custom_measurements.placeholder_bust' | t | default: 'e.g. 95' }}"
            >
            <span class="input-hint">70 - 150 cm</span>
          </td>
        </tr>

        {% comment %} 4. Natural waist - OPTIONAL {% endcomment %}
        <tr>
          <td>
            {{ 'products.product.custom_measurements.waist' | t | default: 'Waist (natural)' }}
          </td>
          <td>
            <input 
              type="number" 
              name="properties[Waist (cm)]" 
              min="50" 
              max="130" 
              step="0.1" 
              placeholder="{{ 'products.product.custom_measurements.placeholder_optional' | t | default: 'Optional' }}"
            >
            <span class="input-hint">50 - 130 cm</span>
          </td>
        </tr>

        {% comment %} 5. Hip circumference - REQUIRED {% endcomment %}
        <tr>
          <td>
            {{ 'products.product.custom_measurements.hips' | t | default: 'Hips (fullest point)' }}
            <span class="required-indicator">*</span>
          </td>
          <td>
            <input 
              type="number" 
              name="properties[Hips (cm)]" 
              min="70" 
              max="160" 
              step="0.1" 
              required 
              placeholder="{{ 'products.product.custom_measurements.placeholder_hips' | t | default: 'e.g. 100' }}"
            >
            <span class="input-hint">70 - 160 cm</span>
          </td>
        </tr>

        {% comment %} 6. Sleeve length - REQUIRED {% endcomment %}
        <tr>
          <td>
            {{ 'products.product.custom_measurements.sleeve' | t | default: 'Sleeve length (shoulder → wrist)' }}
            <span class="required-indicator">*</span>
          </td>
          <td>
            <input 
              type="number" 
              name="properties[Sleeve Length (cm)]" 
              min="40" 
              max="80" 
              step="0.1" 
              required 
              placeholder="{{ 'products.product.custom_measurements.placeholder_sleeve' | t | default: 'e.g. 60' }}"
            >
            <span class="input-hint">40 - 80 cm</span>
          </td>
        </tr>

        {% comment %} 7. Upper-arm / biceps - OPTIONAL {% endcomment %}
        <tr>
          <td>
            {{ 'products.product.custom_measurements.upper_arm' | t | default: 'Upper-arm / biceps' }}
          </td>
          <td>
            <input 
              type="number" 
              name="properties[Upper Arm (cm)]" 
              min="20" 
              max="60" 
              step="0.1" 
              placeholder="{{ 'products.product.custom_measurements.placeholder_optional' | t | default: 'Optional' }}"
            >
            <span class="input-hint">20 - 60 cm</span>
          </td>
        </tr>

        {% comment %} 8. Wrist / cuff - OPTIONAL {% endcomment %}
        <tr>
          <td>
            {{ 'products.product.custom_measurements.wrist' | t | default: 'Wrist / cuff' }}
          </td>
          <td>
            <input 
              type="number" 
              name="properties[Wrist (cm)]" 
              min="10" 
              max="30" 
              step="0.1" 
              placeholder="{{ 'products.product.custom_measurements.placeholder_optional' | t | default: 'Optional' }}"
            >
            <span class="input-hint">10 - 30 cm</span>
          </td>
        </tr>
      </tbody>
    </table>
    
    <div class="measurements-error">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="15" y1="9" x2="9" y2="15"></line>
        <line x1="9" y1="9" x2="15" y2="15"></line>
      </svg>
      <span>{{ 'products.product.custom_measurements.error_message' | t | default: 'Please fill in all required measurements' }}</span>
    </div>
  </div>
{% endif %}

